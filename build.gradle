// ~/build.gradle
plugins {
    id 'java'
    id 'ear'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
}

repositories {
    mavenCentral()
}

allprojects {
    repositories {
        mavenCentral()
    }
}

subprojects {
    apply plugin: 'java'

    dependencies {
        implementation 'io.github.classgraph:classgraph:4.8.165'
        testImplementation 'junit:junit:4.13.2'
        implementation 'jakarta.persistence:jakarta.persistence-api:3.0.0'
        implementation 'jakarta.ejb:jakarta.ejb-api:4.0.0'
    }
}

ear {
  // appDirectory = file('src/main/app') 
      dependencies {
        implementation 'io.github.classgraph:classgraph:4.8.165'
        testImplementation 'junit:junit:4.13.2'
        implementation 'jakarta.persistence:jakarta.persistence-api:3.0.0'
        implementation 'jakarta.ejb:jakarta.ejb-api:4.0.0'

        deploy project(':ejb')
        deploy project(':war')
      }
}

